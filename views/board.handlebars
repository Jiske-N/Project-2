{{! Basic page for task manager }}
{{! APPLY STYLING VIA BOOTSTRAP + CSS }}

    <main class="container">
      <header class="header">
        <h1 class="title">Task Board</h1>

      </header>
      <section class="boards">
        {{!-- {{#each boards}}
          <div class="board">
            <header class="board-header">
              <h3 class="board-title">{{this.name}}</h3>
            </header>
            <section class="tasks">
              {{#each this.tasks}}
                <div class="task">
                  <header class="task-header">
                    <h5 class="task-title">{{this.title}}</h5>
                  </header>
                  <p class="task-text">{{this.description}}</p>
                  <footer class="task-footer">
                    <small class="task-status">{{this.status}}</small>
                  </footer>
                </div>
              {{/each}}
            </section>
          </div>
        {{/each}} --}}


      </section>
      <section class="list-container flex-row">
        {{#each lists as |List|}}
        <div class="list flex-col">
          <h2>{{name}}</h2>
            <div class="task-wrapper flex-col">
              {{> task-details}}
            </div>
            <div class="new-task-container">
            {{!-- Add task button at the bottom of each list --}}
            {{> task-popup}}
            </div>
        </div>
        {{/each}}
      </section>

{{!-- Update name for list --}}
<script>
  document.querySelector('.add-list-form').addEventListener('submit', async (event) => {
      event.preventDefault();
      const name = event.target.name.value;

      await fetch('/api/lists', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ name }),
      });

      window.location.reload();
    });
//Move task to another list, add draggable functionality
    document.querySelectorAll('.move-task-select').forEach(select => {
      select.addEventListener('change', async (event) => {
        const taskId = event.target.dataset.taskId;
        const newListId = event.target.value;

        await fetch(`/api/tasks/${taskId}/move`, {
          method: 'PUT',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ listId: newListId }),
        });

        window.location.reload();
      });
    });
  </script>

    </main>
    {{!-- <script src="./js/createTask.js"></script> --}}
    <script src="./js/newComment.js"></script> 
